<!DOCTYPE html>
<html lang="hi">
  <head>
    <meta charset="utf-8" />
    <title>Member Verification — Durga Puja</title>
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <style>
      body {
        font-family: "Segoe UI", "Noto Sans Devanagari", Arial, Helvetica,
          sans-serif;
        background: linear-gradient(135deg, #fbeee6 0%, #f2f4f7 100%);
        padding: 0;
        min-height: 100vh;
      }
      .container {
        max-width: 800px;
        margin: 32px auto 0 auto;
        padding: 0 16px;
      }
      .festive-heading {
        text-align: center;
        font-size: 2.1rem;
        font-weight: bold;
        color: #b71c1c;
        font-family: "Noto Sans Devanagari", "Segoe UI", Arial, sans-serif;
        margin-bottom: 8px;
        letter-spacing: 1px;
        text-shadow: 0 2px 8px #e57373, 0 0px 0px #fff;
      }
      .sub-heading {
        text-align: center;
        font-size: 1.2rem;
        color: #333;
        margin-bottom: 24px;
      }
      .box {
        background: #fff;
        padding: 24px 20px 20px 20px;
        border-radius: 16px;
        box-shadow: 0 8px 32px rgba(183, 28, 28, 0.1);
        margin-bottom: 24px;
        position: relative;
      }
      h1 {
        margin: 0 0 8px 0;
        font-size: 1.25rem;
        color: #b71c1c;
        font-weight: 600;
        text-align: center;
      }
      .verified {
        background: linear-gradient(90deg, #e8f9ee 60%, #c8f7c5 100%);
        color: #0a6b36;
        padding: 12px;
        border-radius: 8px;
        margin-top: 12px;
        font-weight: 700;
        text-align: center;
        font-size: 1.1rem;
        box-shadow: 0 2px 8px rgba(10, 107, 54, 0.08);
      }
      .not {
        background: linear-gradient(90deg, #fff1f0 60%, #ffd6d6 100%);
        color: #a22a2a;
        padding: 12px;
        border-radius: 8px;
        margin-top: 12px;
        font-weight: 700;
        text-align: center;
        font-size: 1.1rem;
        box-shadow: 0 2px 8px rgba(162, 42, 42, 0.08);
      }
      .details {
        margin-top: 12px;
        padding: 14px 12px;
        border-radius: 8px;
        background: #fbfbfb;
        font-size: 1rem;
        box-shadow: 0 1px 4px rgba(0, 0, 0, 0.03);
      }
      .small {
        font-size: 13px;
        color: #666;
      }
      .social {
        display: flex;
        justify-content: center;
        gap: 24px;
        margin-top: 16px;
        margin-bottom: 24px;
      }
      .social a {
        display: flex;
        align-items: center;
        justify-content: center;
        width: 44px;
        height: 44px;
        border-radius: 50%;
        background: #fff;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.07);
        transition: box-shadow 0.2s, transform 0.2s;
        border: 2px solid #fbeee6;
      }
      .social a:hover {
        box-shadow: 0 4px 16px rgba(183, 28, 28, 0.15);
        transform: scale(1.08);
        border-color: #b71c1c;
      }
      .social svg {
        width: 24px;
        height: 24px;
        fill: #b71c1c;
      }
      @media (max-width: 600px) {
        .container {
          max-width: 100%;
          padding: 0 4px;
        }
        .box {
          padding: 16px 6px;
        }
        .festive-heading {
          font-size: 1.3rem;
        }
        .sub-heading {
          font-size: 1rem;
        }
      }
    </style>
  </head>
  <body>
    <div class="container">
      <div class="festive-heading">
        श्री श्री १०८ माँ वैष्णवी दुर्गा पूजा समिति, धर्मपुर
      </div>
      <div class="sub-heading">Durga Puja Committee — Member Verification</div>
      <div class="box">
        <div id="status" class="small">Processing...</div>
        <div id="member" class="details">Please wait...</div>
      </div>
      <div class="social">
        <a
          href="https://youtube.com/@DurgapujasamitiDharampur"
          target="_blank"
          title="YouTube"
          rel="noopener"
          style="
            background: #ff0000;
            border: none;
            width: 160px;
            color: #fff;
            font-weight: 600;
            font-size: 1rem;
            justify-content: center;
          "
        >
          <svg
            viewBox="0 0 24 24"
            style="margin-right: 8px; width: 28px; height: 28px; fill: #fff"
          >
            <path
              d="M23.498 6.186a2.994 2.994 0 0 0-2.112-2.112C19.413 3.5 12 3.5 12 3.5s-7.413 0-9.386.574A2.994 2.994 0 0 0 .502 6.186C0 8.159 0 12 0 12s0 3.841.502 5.814a2.994 2.994 0 0 0 2.112 2.112C4.587 20.5 12 20.5 12 20.5s7.413 0 9.386-.574a2.994 2.994 0 0 0 2.112-2.112C24 15.841 24 12 24 12s0-3.841-.502-5.814zM9.545 15.568V8.432L15.818 12l-6.273 3.568z"
            />
          </svg>
          <span style="font-family: inherit; color: #fff">YouTube</span>
        </a>
        <a
          href="https://phon.pe/your-phonepe-link"
          target="_blank"
          title="Donate via PhonePe"
          rel="noopener"
          style="
            background: #6f2cff;
            border: none;
            width: 160px;
            color: #fff;
            font-weight: 600;
            font-size: 1rem;
            justify-content: center;
          "
        >
          <svg
            viewBox="0 0 32 32"
            style="margin-right: 8px; width: 28px; height: 28px; fill: #fff"
          >
            <path
              d="M16 2C8.268 2 2 8.268 2 16c0 7.732 6.268 14 14 14s14-6.268 14-14C30 8.268 23.732 2 16 2zm0 26C9.373 28 4 22.627 4 16S9.373 4 16 4s12 5.373 12 12-5.373 12-12 12zm-1-17v4h-3v2h3v4h2v-4h3v-2h-3v-4h-2z"
            />
          </svg>
          <span style="font-family: inherit; color: #fff">Donate</span>
        </a>
      </div>
    </div>

    <script>
      // CONFIG: file name of members list (same folder)
      const MEMBERS_JSON = "members.json";

      // helper: get ?id= from URL
      function getParam(name) {
        const params = new URLSearchParams(window.location.search);
        return params.get(name);
      }

      const id = getParam("id");
      const statusDiv = document.getElementById("status");
      const memberDiv = document.getElementById("member");

      if (!id) {
        statusDiv.innerText = "Error: No ID provided in URL.";
        memberDiv.innerHTML =
          "QR must contain full URL with ?id=YOUR_ID<br><br>Example: https://your-site.com/verify.html?id=DPC-0001";
      } else {
        statusDiv.innerText = `Scanned ID: ${id}`;
        fetch(MEMBERS_JSON)
          .then((r) => {
            if (!r.ok) throw new Error("Failed to load members list");
            return r.json();
          })
          .then((list) => {
            // find exact id (case-sensitive). If you want case-insensitive, adapt here.
            const found = list.find((m) => m.id === id);
            if (found) {
              document.body
                .querySelector(".box")
                .insertAdjacentHTML(
                  "afterbegin",
                  '<div class="verified">Verified Member ✅</div>'
                );
              memberDiv.innerHTML = `
              <strong>${found.name}</strong><br>
              <span class="small"><strong>ID:</strong> ${
                found.id
              } &nbsp; | &nbsp; <strong>Role:</strong> ${found.role}</span>
              <div style="margin-top:8px">
                <strong>Phone:</strong> ${found.phone || "—"}<br>
              </div>
            `;
            } else {
              document.body
                .querySelector(".box")
                .insertAdjacentHTML(
                  "afterbegin",
                  '<div class="not">Not a registered member</div>'
                );
              memberDiv.innerHTML = `<strong>Scanned ID:</strong> ${id}<br><br>If you think this is wrong, contact committee.`;
            }
          })
          .catch((err) => {
            statusDiv.innerText = "Error loading members list.";
            memberDiv.innerHTML = `<div class="small">${err.message}</div>`;
          });
      }
    </script>
  </body>
</html>
